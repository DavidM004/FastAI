<div class="relative inline-block" x-data="{ open: false }">
  <!-- Main Button -->
  <button
    @click="open = !open"
    class="flex items-center justify-between w-32 lg:w-56 px-4 py-2 bg-section hover:bg-purple-50 hover:text-purple-500 rounded-lg text-gray-900 transition-colors"
  >
    <div class="flex items-center gap-2">
      <!-- <div class="w-5 h-5 rounded-full bg-purple-600"></div> -->
      <span class="text-xs font-medium lg:text-sm">Контекст</span>
    </div>
    <svg
      xmlns="http://www.w3.org/2000/svg"
      width="20"
      height="20"
      viewBox="0 0 24 24"
      fill="none"
      stroke="currentColor"
      stroke-width="2"
      stroke-linecap="round"
      stroke-linejoin="round"
      class="text-gray-500"
    >
      <path d="m6 9 6 6 6-6"></path>
    </svg>
  </button>

  <div
    class="w-54 lg:w-96 bg-white rounded-lg p-4 space-y-6 absolute -top-[29em] -left-32 shadow-xl"
    x-show="open"
    @click.away="open = false"
  >
    <!-- Context Dialog Toggle -->
    <div class="flex items-center justify-between">
      <span class="text-gray-900">Контекст диалога</span>
      <button
        class="w-12 h-6 rounded-full bg-emerald-500 relative transition-colors duration-200"
        x-data="{ enabled: true }"
        @click="enabled = !enabled"
        :class="{ 'bg-gray-200': !enabled, 'bg-emerald-500': enabled }"
      >
        <span
          class="w-5 h-5 rounded-full bg-white absolute left-0.5 top-0.5 transition-transform duration-200 transform"
          :class="{ 'translate-x-6': enabled }"></span>
      </button>
    </div>

    <!-- Maximum Context Size -->
    <div class="space-y-4">
      <div class="text-gray-900">Максимальный размер контекста</div>

      <!-- Quick Models Slider -->
      <div class="space-y-2">
        <div class="text-purple-600 text-sm">
          Быстрые модели <span class="text-gray-500"
            >(GPT-4o Mini, Haiku, Flash)</span
          >
        </div>
        <div class="relative">
          <input
            type="range"
            min="0"
            max="1500"
            value="1500"
            class="w-full h-1 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-purple-600"
          />
          <div class="text-gray-500 text-sm mt-1">
            1500 символов (~188 слов)
          </div>
        </div>
      </div>

      <!-- Smart Models Slider -->
      <div class="space-y-2">
        <div class="text-purple-600 text-sm">
          Умные модели <span class="text-gray-500"
            >(GPT-4o, Sonnet, Opus, Pro)</span
          >
        </div>
        <div class="relative">
          <input
            type="range"
            min="0"
            max="1200"
            value="1200"
            disabled
            class="w-full h-1 bg-gray-200 rounded-lg appearance-none cursor-not-allowed opacity-50"
          />
          <div class="text-gray-500 text-sm mt-1">
            1200 символов (~150 слов)
          </div>
        </div>
      </div>
    </div>

    <!-- Warning Message -->
    <div
      class="bg-orange-50 border border-orange-100 rounded-lg p-3 text-sm text-amber-800"
    >
      <div class="flex gap-2">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="20"
          height="20"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
          class="text-amber-500"
        >
          <path
            d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"
          ></path>
          <line x1="12" y1="9" x2="12" y2="13"></line>
          <line x1="12" y1="17" x2="12.01" y2="17"></line>
        </svg>
        Изменение размера контекста не доступно в бесплатной пробной версии.
      </div>
    </div>

    <!-- Help Text -->
    <div class="text-gray-400 text-sm">
      Чем больше размер контекста, тем больше нейросеть помнит из вашей
      предыдущей переписки, но тем больше расходуется слов.
    </div>
  </div>
</div>
